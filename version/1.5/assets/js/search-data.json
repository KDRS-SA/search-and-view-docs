{"0": {
    "doc": "1.5 Highlights",
    "title": "Name change",
    "content": "KDRS Innsyn is now called KDRS Search &amp; View. På norsk: KDRS Søk &amp; Vis . ",
    "url": "//version/1.5/about/1.5-highlights/#name-change",
    
    "relUrl": "/about/1.5-highlights/#name-change"
  },"1": {
    "doc": "1.5 Highlights",
    "title": "Download multiple files",
    "content": "It is now possible to download multiple files at once as a Zip-archive, by checking the checkboxes for the files you want. See &lt;export&gt; and &lt;filename&gt; to use this feature. ",
    "url": "//version/1.5/about/1.5-highlights/#download-multiple-files",
    
    "relUrl": "/about/1.5-highlights/#download-multiple-files"
  },"2": {
    "doc": "1.5 Highlights",
    "title": "Easier installation and configuration",
    "content": "Installation and is made easier, by including an install script. This ensures correct Docker version and loads the Docker image. | Configuration of the system is now done by modifying a simple .env file, rather than the full docker-compose.yml. | docker-compose.yml is now compose.yaml | innsyn/vendor is now /sv/templates | . ",
    "url": "//version/1.5/about/1.5-highlights/#easier-installation-and-configuration",
    
    "relUrl": "/about/1.5-highlights/#easier-installation-and-configuration"
  },"3": {
    "doc": "1.5 Highlights",
    "title": "Many XML simplifications",
    "content": "To make writing and reading XML templates easier, we have removed several unnecessary tags. ",
    "url": "//version/1.5/about/1.5-highlights/#many-xml-simplifications",
    
    "relUrl": "/about/1.5-highlights/#many-xml-simplifications"
  },"4": {
    "doc": "1.5 Highlights",
    "title": "Before",
    "content": "&lt;root&gt; &lt;meta&gt; &lt;version&gt;0.1.0&lt;/version&gt; &lt;description&gt;sakila movie database&lt;/description&gt; &lt;/meta&gt; &lt;views&gt; &lt;view&gt; &lt;name&gt;movies&lt;/name&gt; &lt;tables&gt; &lt;table&gt; &lt;name&gt;film&lt;/name&gt; &lt;heading&gt;movies&lt;/heading&gt; &lt;fields&gt;title,description&lt;/fields&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;/table&gt; &lt;/tables&gt; &lt;/view&gt; &lt;/views&gt; &lt;/root&gt; . ",
    "url": "//version/1.5/about/1.5-highlights/",
    
    "relUrl": "/about/1.5-highlights/"
  },"5": {
    "doc": "1.5 Highlights",
    "title": "After",
    "content": "&lt;views&gt; &lt;version&gt;0.1.0&lt;/version&gt; &lt;description&gt;sakila movie database&lt;/description&gt; &lt;view&gt; &lt;name&gt;movies&lt;/name&gt; &lt;table&gt; &lt;name&gt;film&lt;/name&gt; &lt;title&gt;movies&lt;/title&gt; &lt;fields&gt;title,description&lt;/fields&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;/table&gt; &lt;/view&gt; &lt;/views&gt; . ",
    "url": "//version/1.5/about/1.5-highlights/",
    
    "relUrl": "/about/1.5-highlights/"
  },"6": {
    "doc": "1.5 Highlights",
    "title": "Before",
    "content": "&lt;edit&gt; &lt;field&gt;first_name.titleize&lt;/field&gt; &lt;field&gt;last_name.titleize&lt;/field&gt; &lt;/edit&gt; . ",
    "url": "//version/1.5/about/1.5-highlights/",
    
    "relUrl": "/about/1.5-highlights/"
  },"7": {
    "doc": "1.5 Highlights",
    "title": "After",
    "content": "&lt;edit&gt;first_name.titleize&lt;/edit&gt; &lt;edit&gt;last_name.titleize&lt;/edit&gt; . ",
    "url": "//version/1.5/about/1.5-highlights/",
    
    "relUrl": "/about/1.5-highlights/"
  },"8": {
    "doc": "1.5 Highlights",
    "title": "Verification",
    "content": "To detect common mistakes and ensure validity of templates, we have introduced a verification system, available to archivists and administrators. This system checks every template (XML and Ruby) as well as system settings. This tool can be helpful when updating templates to 1.5, as all deprecated tags will be detected. It is accessed through the navigation menu. ",
    "url": "//version/1.5/about/1.5-highlights/#verification",
    
    "relUrl": "/about/1.5-highlights/#verification"
  },"9": {
    "doc": "1.5 Highlights",
    "title": "Better error messages",
    "content": "Instead of the “Something went wrong” page, selected code errors will now be displayed in app for archivists and administrators. In this way we try to keep security while providing better developer feedback. ",
    "url": "//version/1.5/about/1.5-highlights/#better-error-messages",
    
    "relUrl": "/about/1.5-highlights/#better-error-messages"
  },"10": {
    "doc": "1.5 Highlights",
    "title": "Ruby simplifications",
    "content": " ",
    "url": "//version/1.5/about/1.5-highlights/#ruby-simplifications",
    
    "relUrl": "/about/1.5-highlights/#ruby-simplifications"
  },"11": {
    "doc": "1.5 Highlights",
    "title": "Before",
    "content": "customers = @catalog.get_table(\"customers\", {active:true}, fl:\"name, email\") . ",
    "url": "//version/1.5/about/1.5-highlights/#before",
    
    "relUrl": "/about/1.5-highlights/#before"
  },"12": {
    "doc": "1.5 Highlights",
    "title": "After",
    "content": "customers = table(\"customers\", active:true, fields:\"name, email\") . | name corresponds to xml tag ‘table’ | no parenthesis needed for criteria | fl is now fields | . ",
    "url": "//version/1.5/about/1.5-highlights/#after",
    
    "relUrl": "/about/1.5-highlights/#after"
  },"13": {
    "doc": "1.5 Highlights",
    "title": "Before",
    "content": "To get more than the default 20 rows . rows: Catalog::MAX_ROWS . ",
    "url": "//version/1.5/about/1.5-highlights/#before-1",
    
    "relUrl": "/about/1.5-highlights/#before-1"
  },"14": {
    "doc": "1.5 Highlights",
    "title": "After",
    "content": "rows: MAX_ROWS . ",
    "url": "//version/1.5/about/1.5-highlights/#after-1",
    
    "relUrl": "/about/1.5-highlights/#after-1"
  },"15": {
    "doc": "1.5 Highlights",
    "title": "Before",
    "content": "@docs = @catalog.join_table(main:@docs, fk:\"city_id\", table:\"city\",pk:\"city_id\", fl:\"city\") . ",
    "url": "//version/1.5/about/1.5-highlights/#before-2",
    
    "relUrl": "/about/1.5-highlights/#before-2"
  },"16": {
    "doc": "1.5 Highlights",
    "title": "After",
    "content": "lookup(main:@docs, foreignkey:\"city_id\", table:\"city\", primarykey:\"city_id\", fields:\"city\") . | @docs variable will be modified in place | method name equal to xml tag ‘lookup’ | named parameters equal to xml tags | . ",
    "url": "//version/1.5/about/1.5-highlights/#after-2",
    
    "relUrl": "/about/1.5-highlights/#after-2"
  },"17": {
    "doc": "1.5 Highlights",
    "title": "Before",
    "content": "render 'table', vi:@si, ti:@ti . ",
    "url": "//version/1.5/about/1.5-highlights/#before-3",
    
    "relUrl": "/about/1.5-highlights/#before-3"
  },"18": {
    "doc": "1.5 Highlights",
    "title": "After",
    "content": "render 'table' . ",
    "url": "//version/1.5/about/1.5-highlights/#after-3",
    
    "relUrl": "/about/1.5-highlights/#after-3"
  },"19": {
    "doc": "1.5 Highlights",
    "title": "Better documentation",
    "content": ". | ruby snippets | tag outline | Tags in our examples are now clickable | . ",
    "url": "//version/1.5/about/1.5-highlights/#better-documentation",
    
    "relUrl": "/about/1.5-highlights/#better-documentation"
  },"20": {
    "doc": "1.5 Highlights",
    "title": "All changes",
    "content": "See Release Notes for full list of changes . ",
    "url": "//version/1.5/about/1.5-highlights/#all-changes",
    
    "relUrl": "/about/1.5-highlights/#all-changes"
  },"21": {
    "doc": "1.5 Highlights",
    "title": "1.5 Highlights",
    "content": " ",
    "url": "//version/1.5/about/1.5-highlights/",
    
    "relUrl": "/about/1.5-highlights/"
  },"22": {
    "doc": "Guide",
    "title": "Introduction",
    "content": "This guide is intended to give some familiarity with making XML templates for displaying data from SIARD-files in KDRS Search &amp; View. It will not contain a full walkthrough of every feature, but is a good place to get started. ",
    "url": "//version/1.5/guide/#introduction",
    
    "relUrl": "/guide/#introduction"
  },"23": {
    "doc": "Guide",
    "title": "Guide",
    "content": " ",
    "url": "//version/1.5/guide/",
    
    "relUrl": "/guide/"
  },"24": {
    "doc": "Part 0: Editing environment",
    "title": "Installing VS Code",
    "content": ". | First we need Visual Studio Code, a text editor from code by microsoft. You can download VS Code here. | After installing VS Code, open VS Code, then open the following links in a browser and click “Install”. They will then open in the VS Code extension viewer where you have to click “Install” again (these extensions may be included in VS Code, if you already have them installed you will se an “Uninstall” button instead): . | Remote - SSH - allows for connecting to a remote machine via SSH and editing files directly in VS Code on your local machine. | Remote - SSH: Editing Configuration Files - let’s you easily edit SSH config files in VS Code. Note: Your browser may ask you if you want to open a link in VS Code. Accept this prompt | . | . ",
    "url": "//version/1.5/guide/part-0-editing-environment/#installing-vs-code",
    
    "relUrl": "/guide/part-0-editing-environment/#installing-vs-code"
  },"25": {
    "doc": "Part 0: Editing environment",
    "title": "Connecting via SSH in VS Code",
    "content": ". | Click the remote button in the lower left corner of the screen. | Click “Connect to host”. | Click “Add new SSH Host”. | Enter the username and address of the server running KDRS Search &amp; View. For SSH this is formatted as &lt;username&gt;@&lt;address&gt;. If you are unsure what to enter here, ask whoever is responsible for managing the server. You will also need the password for the user. | Select where you want to store the configuration file for SSH. The top option, in your user folder, is most commonly used. | Now the server should be added. Open the “Remote Window” again. | Click “Connect to host”. | Click the SSH host you just added. | Choose Linux if prompted. | If informed about the server’s fingerprint, click continue. This message appears the first time connecting to a server via SSH. | Enter the password for the account you connected to. TIP: You can create an SSH certificate and add it on the Linux server to allow for easier SSH login without a password. This guide demonstrates one method of doing this. | . ",
    "url": "//version/1.5/guide/part-0-editing-environment/#connecting-via-ssh-in-vs-code",
    
    "relUrl": "/guide/part-0-editing-environment/#connecting-via-ssh-in-vs-code"
  },"26": {
    "doc": "Part 0: Editing environment",
    "title": "Editing files on the remote machine",
    "content": ". | Click the “Explorer” button in the sidebar and select “Open Folder”. | Enter the path /var/kdrs/sv/templates/ and click “OK”. This is the path of the folder where XML templates are stored. | Now we recommend adding the Red Hat XML extension. This should be installed in the VS Code window that is connected to a remote server to make sure it gets activated for remote use. Some benefits of this extension are: . | Warning messages if the XML is invalid | Automatic formatting | Automatic closing of tags (if you write &lt;hello&gt;, you will automatically get &lt;/hello&gt;) | And more… | . | . Note: You can find more extensions to use if you want to, but be careful (especially if working with sensitive data). Just like browser extensions, they can contain malicious code. All extensions recommended in this guide are provided by Microsoft and Red Hat, both considered to be highly reputable. | You are now ready to edit files. On the left side of the screen you can open the “Explorer” sidebar that let’s you navigate the templates folder we opened and create files there. If you select a file in the explorer, it will open an editor window in the center. | . ",
    "url": "//version/1.5/guide/part-0-editing-environment/#editing-files-on-the-remote-machine",
    
    "relUrl": "/guide/part-0-editing-environment/#editing-files-on-the-remote-machine"
  },"27": {
    "doc": "Part 0: Editing environment",
    "title": "Part 0: Editing environment",
    "content": "This part of the guide will walk through some recommended options for editing XML template files on a Linux server. There are many ways of doing this, but our method allows for seamless editing and saving of files on a remote server, in a modern editor with good support for XML files. However, if you already have a workflow for this that you are comfortable with using, feel free to stick to that. ",
    "url": "//version/1.5/guide/part-0-editing-environment/",
    
    "relUrl": "/guide/part-0-editing-environment/"
  },"28": {
    "doc": "Part 1: Loading SIARD files",
    "title": "Part 1: Loading SIARD files",
    "content": "Uploading of SIARD files is done in DBPTK (Database Preservation Toolkit), which interprets SIARD files and loads the data into a modern database system that can be used by KDRS Search &amp; View. | Access DBPTK by using your browser and navigating to the web address KDRS S&amp;V runs on followed by :8080. For example, as our server has the address innsyn.detbestearkivet.no we would have to navigate to innsyn.detbestearkivet.no:8080. Note: The default port is 8080, but it is possible this has been changed for your installation. | Click “LOAD SIARD FILE” . | Click “CHOOSE FILES…” and select the sakila.siard file that you downloaded in the prerequisites. | Wait until the status indicator shows a green checkmark and click “OPEN SIARD”. | Now our file is uploaded, but we still have to make DBPTK index the data for KDRS S&amp;V to access it. This is done by clicking “BROWSE” in the database overview. NOTE: This step takes a long time. You can proceed to part 2 of the guide while waiting, as we do not need the indexing to be finished until part 3. | When the indexing is finished, you should get the popup “SIARD data successfully imported”. You can also verify that the processing was successful by ensuring the “Status” in the database overview is “Ready”. | . ",
    "url": "//version/1.5/guide/part-1-loading-siard-files/",
    
    "relUrl": "/guide/part-1-loading-siard-files/"
  },"29": {
    "doc": "Part 2: Configuring KDRS S&V",
    "title": "Part 2: Configuring KDRS S&V",
    "content": "Now we will log into KDRS S&amp;V and setup a company (archive) and an account to use. | By default only the admin account exists. Log into the admin account by clicking OK after entering the default credentials: E-mail: admin@kdrs.no Password: admin . | IMPORTANT: Now we have to change the admin password from the default one to a secret, secure one. Click “Admin” in the top right to open the navigation menu and navigate to “Brukere”. | Click the edit icon for the admin user. | Enter a good password and click “OK” (minimum is 14 characters). | Now we need to add our archive. Open the navigation menu and navigate to “Firma”. | Click “Nytt firma”. | In the “Navn” field, enter the name of your archive, then click OK. | Now we can set up an account for an archivist. Archivists have permissions to create new catalogs. Navigate to “Brukere” in the navigation meny and click “Ny bruker”. | Fill out all the fields, select the archive you made for “Firma” and select the checkbox for “Arkivar”, before clicking “OK” to create the new account. | Log out of the admin account and log in to the new account you created. | . We are now ready to create a new template and display some data! . ",
    "url": "//version/1.5/guide/part-2-configuring-kdrs-innsyn/",
    
    "relUrl": "/guide/part-2-configuring-kdrs-innsyn/"
  },"30": {
    "doc": "Part 3: Creating our first template",
    "title": "Part 3: Creating our first template",
    "content": "Now we are ready to create our first XML template and display data from the Sakila sample SIARD-file. XML templates are stored in the templates folder where KDRS S&amp;V is stored. The full path would generally be /var/kdrs/sv/templates. | Within the templates folder, create a new XML file named innsyn_tutorial.xml. This file can be placed in either the root of or in any subdirectory of the templates folder. Only the name of the file matters. | Now we will fill the file with the bare minium to make it display something in KDRS S&amp;V: . | . &lt;views&gt; &lt;view&gt; &lt;name&gt;Den beste visningen&lt;/name&gt; &lt;/view&gt; &lt;/views&gt; . You can choose whatever you want for the name This creates a new “View” for our database, which is a collection of tables. We will add the tables later. | Now we need the UUID of our database. It is found in the top left of the database overview in DBPTK. Copy this ID for the next step (without the enclosing parentheses). | Now go to the KDRS S&amp;V frontpage. Enter edit mode by choosing “Rediger” in the navigation menu, and click “Nytt innsyn” to add our new template and link it to the database. | Here we need to enter some information for the new database. The field “Solr ID” should contain the UUID we found in step 3. For the 2 first fields, you are free to enter a title and description of your choosing, but it is required that one of these two fields contain the filename of our XML template. Because our XML file is innsyn_tutorial.xml, we have added that name to the description. After completion, click “OK”. | Now you should see an overview of the new database, showing a link to the view we defined in the XML template. Clicking the link at this point will cause an error, as we have not yet created any tables for it. | . We are now ready to start editing our XML template further to actually extract and present some data from our SIARD-file. ",
    "url": "//version/1.5/guide/part-3-creating-our-first-template/",
    
    "relUrl": "/guide/part-3-creating-our-first-template/"
  },"31": {
    "doc": "Part 4: Displaying some data",
    "title": "Part 4: Displaying some data",
    "content": "Now we will actually show some information stored in the database. The following image shows a schema of all the tables in our database: . The database schema is from DBPTK, and is found by clicking “BROWSE” in the database overview The table film looks interesting, so we will click that to view it: Our first task will be to show the title and description of every film in a table. | To do this, we have to start by defining a new table for our view. We do this by adding a &lt;table&gt; tag in our XML template: | . &lt;views&gt; &lt;view&gt; &lt;name&gt;Den beste visningen&lt;/name&gt; &lt;table&gt; &lt;/table&gt; &lt;/view&gt; &lt;/views&gt; . | Within the &lt;table&gt; tag, there are 4 required tags we need to specify. These are &lt;name&gt;, &lt;title&gt;, &lt;primarykey&gt; and &lt;fields&gt;. The purpose of these tags is as follows: | . | XML tag | Value | . | &lt;name&gt; | The name of the table in the database we want data from. As we are getting data from the table film, the value will be film | . | &lt;title&gt; | The name that will be displayed above our table. This can be set to anything you want. | . | &lt;primarykey&gt; | A primary key is a column that has a unique value for every row in a table. For the film table the unique column is film_id, so we have to set the primary key to film_id | . | &lt;fields&gt; | This is a list of columns we want to show data from. The list is comma-separated, so because we want to show data from the columns title and description, we have to set fields to title, description | . | Update the XML template file with the required tags: | ... &lt;table&gt; &lt;name&gt;film&lt;/name&gt; &lt;title&gt;Den beste tabellen&lt;/title&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;fields&gt;title, description&lt;/fields&gt; &lt;/table&gt; ... Some parts of the XML file that were not changed in this step have been omitted. | If we open our view now, it should show a table with columns for titles and descriptions. | . Now we have a fully working table, and are ready to learn some more advanced techniques! . ",
    "url": "//version/1.5/guide/part-4-displaying-some-data/",
    
    "relUrl": "/guide/part-4-displaying-some-data/"
  },"32": {
    "doc": "Part 5: Editing our table",
    "title": "Part 5: Editing our table",
    "content": "Our table looks pretty good already, but let’s say we want to make it even better by changing the column headers, and having the titles not be capitalized. | To change the column headers, we need to specify the new names within the &lt;fields&gt; tag. We do that by adding as (name) after the column name, where, (name) can be whichever header name we want. Modify the XML-template to include some names of your choosing. | ... &lt;table&gt; &lt;name&gt;film&lt;/name&gt; &lt;title&gt;Den beste tabellen&lt;/title&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;fields&gt;title as tittel, description as beskrivelse&lt;/fields&gt; &lt;/table&gt; ... | Now we will make the title fields look better, by improving their capitalization. We can do this by using the &lt;edit&gt; tag. It allows us to run Ruby methods on the fields before displaying them. A very useful method for our usecase is titleize. This method makes text look like a title, by capitalizing the first letter of every word. To use the &lt;edit&gt; tag we write on the format fieldname.method_to_perform within it. | ... &lt;table&gt; &lt;name&gt;film&lt;/name&gt; &lt;title&gt;Den beste tabellen&lt;/title&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;fields&gt;title as tittel, description as beskrivelse&lt;/fields&gt; &lt;edit&gt;tittel.titleize&lt;/edit&gt; &lt;/table&gt; ... Note that we had to use the name we gave in step 1 to perform the edit. This is because the as keyword renames the variable itself. | That’s it! Now our table looks even better! | . ",
    "url": "//version/1.5/guide/part-5-editing-our-table/",
    
    "relUrl": "/guide/part-5-editing-our-table/"
  },"33": {
    "doc": "Part 6: Using data from other tables",
    "title": "Part 6: Using data from other tables",
    "content": "Now it’s time to get a bit more advanced, by including data from another table in the database. | Within the table film there is a column language_id, which we will add to our &lt;fields&gt; tag. | ... &lt;table&gt; &lt;name&gt;film&lt;/name&gt; &lt;title&gt;Den beste tabellen&lt;/title&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;fields&gt;title as tittel, description as beskrivelse, language_id&lt;/fields&gt; &lt;edit&gt;tittel.titleize&lt;/edit&gt; &lt;/table&gt; ... Now our table looks like this: . | As you can see, the language_id column has been added, but it is unfortunatly not very user-friendly in it’s current state, as the language is only represented by a number. This is because there is another table in our database: language, which correlates the IDs with a language. | To make our table use the name of the language instead of the ID, we need to use the &lt;lookup&gt; tag. This tag allows us to use a field as a key in another table, to replace the field itself with values from that second table. The &lt;lookup&gt; tag requires 4 child tags within it, which are as follows: . | . | XML tag | Usage | . | &lt;table&gt; | The name of the table we want to lookup data within. In our case this will be language. | . | &lt;primarykey&gt; | The name of the column from our original table (film) that we will match against a key in the new table (language). In our case it is language_id | . | &lt;foreignkey&gt; | The name of the column in the table we are performing the lookup within that will be matched against the &lt;primarykey&gt;. This is also language_id, as the columns have the same names in both the film and language tables. | . | &lt;fields&gt; | The names of the columns we want to retrieve data from. We only want the name of the language, which is stored in the name column | . | That means we need to make the following addition to our XML template: | . &lt;table&gt; &lt;name&gt;film&lt;/name&gt; &lt;title&gt;Den beste tabellen&lt;/title&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;fields&gt;title as tittel, description as beskrivelse, language_id&lt;/fields&gt; &lt;edit&gt;tittel.titleize&lt;/edit&gt; &lt;lookup&gt; &lt;table&gt;language&lt;/table&gt; &lt;primarykey&gt;language_id&lt;/primarykey&gt; &lt;foreignkey&gt;language_id&lt;/foreignkey&gt; &lt;fields&gt;name as språk&lt;/fields&gt; &lt;!-- We can rename the field using the \"as\" keyword we learned in part 5 --&gt; &lt;/lookup&gt; &lt;/table&gt; . | Now our table includes the language: | . ",
    "url": "//version/1.5/guide/part-6-using-data-from-other-tables/",
    
    "relUrl": "/guide/part-6-using-data-from-other-tables/"
  },"34": {
    "doc": "Part 7: Creating child tables",
    "title": "Part 7: Creating child tables",
    "content": "Now we have a list of films, but lets expand it a bit. It could be useful to show which actors played in a film. By using a child table we can let the user click on a film in our first table, which will then open a list of actors that played in that movie. | Let’s check how the tables of films and actors are related. This can be done in the DBPTK schema. We see that film_actor connects the film and actor table. | We can see that the film_actor table contains two columns linking actors with films. This is perfect for our child table, because we can click an entry to use one of it’s fields as a &lt;primarykey&gt;. In our case it will be the film_id of the selected film. We will then display the child table film_actor which contains only the rows where the specified primary key matches a &lt;foreignkey&gt;. The foreign key will also be film_id, as film_actor has that column. | Lets define a new child table in our XML template. This will be done similarily to the first table, but we need 2 extra tags: &lt;parent&gt;, which is the name of the parent table, and as mentioned &lt;foreignkey&gt;, which will be matched against the primary key of the parent table. | ... &lt;table&gt; &lt;name&gt;film&lt;/name&gt; [...] &lt;!-- Part of our first table omitted to keep the text shorter --&gt; &lt;/table&gt; &lt;table&gt; &lt;!-- Our new child table --&gt; &lt;name&gt;film_actor&lt;/name&gt; &lt;title&gt;Skuespillerliste&lt;/title&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;fields&gt;actor_id&lt;/fields&gt; &lt;parent&gt;film&lt;/parent&gt; &lt;foreignkey&gt;film_id&lt;/foreignkey&gt; &lt;/table&gt; ... Our child table now looks like this: . | The child actor table is still very barebones, so let’s improve it by using some previously learned techniques to replace the IDs with names using &lt;lookup&gt; and change the column header using as. | ... &lt;table&gt; &lt;name&gt;film_actor&lt;/name&gt; &lt;title&gt;Skuespillerliste&lt;/title&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;fields&gt;actor_id&lt;/fields&gt; &lt;parent&gt;film&lt;/parent&gt; &lt;foreignkey&gt;film_id&lt;/foreignkey&gt; &lt;lookup&gt; &lt;table&gt;actor&lt;/table&gt; &lt;primarykey&gt;actor_id&lt;/primarykey&gt; &lt;foreignkey&gt;actor_id&lt;/foreignkey&gt; &lt;fields&gt;first_name as fornavn, last_name as etternavn&lt;/fields&gt; &lt;/lookup&gt; &lt;/table&gt; ... | As a last step it is usually good for child tables like this to have a &lt;header&gt; tag that shows which element the child table is a list for, in our case which film. Because we don’t have access to film titles within the film_actor table, we need to use the film_id to perform a lookup on the film table and retrieve the title. | ... &lt;table&gt; &lt;name&gt;film_actor&lt;/name&gt; &lt;title&gt;Skuespillerliste&lt;/title&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;fields&gt;actor_id&lt;/fields&gt; &lt;parent&gt;film&lt;/parent&gt; &lt;foreignkey&gt;film_id&lt;/foreignkey&gt; &lt;header&gt;title as tittel&lt;/header&gt; &lt;!-- The title is retrieved from the second lookup below and renamed. --&gt; &lt;lookup&gt; &lt;table&gt;actor&lt;/table&gt; &lt;primarykey&gt;actor_id&lt;/primarykey&gt; &lt;foreignkey&gt;actor_id&lt;/foreignkey&gt; &lt;fields&gt;first_name as fornavn, last_name as etternavn&lt;/fields&gt; &lt;/lookup&gt; &lt;lookup&gt; &lt;!-- This lookup gets the title from the table film using the film_id --&gt; &lt;table&gt;film&lt;/table&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;foreignkey&gt;film_id&lt;/foreignkey&gt; &lt;fields&gt;title&lt;/fields&gt; &lt;/lookup&gt; &lt;/table&gt; . Our child table should now look like this: . ",
    "url": "//version/1.5/guide/part-7-creating-child-tables/",
    
    "relUrl": "/guide/part-7-creating-child-tables/"
  },"35": {
    "doc": "Part 8: Tabs and filters",
    "title": "Part 8: Tabs and filters",
    "content": "The last feature we will add to our template is a new tab that applies a filter. Lets create a new tab that contains all the short films, meaning one hour or less. | We start by adding a &lt;parent&gt; tag to our film table. This tag can contain any name that is not the name of another table, but it needs to be the same across all tables that we want grouped by tabs. After this we duplicate the whole table, but change the &lt;title&gt; of the second table to make them differentiable. | ... &lt;view&gt; &lt;name&gt;Den beste visningen&lt;/name&gt; &lt;table&gt; &lt;!-- Our original table showing all films --&gt; &lt;name&gt;film&lt;/name&gt; &lt;parent&gt;top&lt;/parent&gt; &lt;!-- \"top\" is commonly used to group tables at the top of the hierarchy (no parent tables) --&gt; &lt;title&gt;Alle filmer&lt;/title&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;fields&gt;title as tittel, description as beskrivelse, language_id&lt;/fields&gt; &lt;edit&gt;tittel.titleize&lt;/edit&gt; &lt;lookup&gt; &lt;table&gt;language&lt;/table&gt; &lt;primarykey&gt;language_id&lt;/primarykey&gt; &lt;foreignkey&gt;language_id&lt;/foreignkey&gt; &lt;fields&gt;name as språk&lt;/fields&gt; &lt;/lookup&gt; &lt;/table&gt; &lt;table&gt; &lt;!-- The new table that will show short films --&gt; &lt;name&gt;film&lt;/name&gt; &lt;parent&gt;top&lt;/parent&gt; &lt;title&gt;Korte filmer&lt;/title&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;fields&gt;title as tittel, description as beskrivelse, language_id&lt;/fields&gt; &lt;edit&gt;tittel.titleize&lt;/edit&gt; &lt;lookup&gt; &lt;table&gt;language&lt;/table&gt; &lt;primarykey&gt;language_id&lt;/primarykey&gt; &lt;foreignkey&gt;language_id&lt;/foreignkey&gt; &lt;fields&gt;name as språk&lt;/fields&gt; &lt;/lookup&gt; &lt;/table&gt; ... Now we can see a new tab appear, which will also list every film. | Now we need to add a &lt;filter&gt; tag to our new table. This tag uses SolR queries, and we can use a Range Search to filter by the films which have a length less than or equal to 60. The syntax for this is length: [* TO 60]. Add this within a &lt;filter&gt; tag in the new table. | ... &lt;table&gt; &lt;name&gt;film&lt;/name&gt; &lt;parent&gt;top&lt;/parent&gt; &lt;title&gt;Korte filmer&lt;/title&gt; &lt;filter&gt;length: [* TO 60]&lt;/filter&gt; &lt;!-- SolR filter here --&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;fields&gt;title as tittel, description as beskrivelse, language_id&lt;/fields&gt; &lt;edit&gt;tittel.titleize&lt;/edit&gt; &lt;lookup&gt; &lt;table&gt;language&lt;/table&gt; &lt;primarykey&gt;language_id&lt;/primarykey&gt; &lt;foreignkey&gt;language_id&lt;/foreignkey&gt; &lt;fields&gt;name as språk&lt;/fields&gt; &lt;/lookup&gt; &lt;/table&gt; ... Our new table now only contains films that are 60 minutes or less! . ",
    "url": "//version/1.5/guide/part-8-tabs-and-filters/",
    
    "relUrl": "/guide/part-8-tabs-and-filters/"
  },"36": {
    "doc": "Prerequisites",
    "title": "Prerequisites",
    "content": "Before starting this guide, you will need the following: . | Access to a server running KDRS Search &amp; View. | KDRS S&amp;V website access. | SSH/FTP access (or another method to edit files on the Linux server). | . | The example Sakila SIARD-dataset. In this guide we will be making templates for this dataset. | . Download sakila.siard . Copyright Notice: The Sakila SIARD-file is a derivative of MySQL’s Sakila SQL sample database, and therefore subject to the New BSD license. ",
    "url": "//version/1.5/guide/prerequisites/",
    
    "relUrl": "/guide/prerequisites/"
  },"37": {
    "doc": "Home",
    "title": "KDRS Search &amp; View",
    "content": "KDRS Search &amp; View brings archives to the web. The system can be configured by using XML, and Ruby when needed. ",
    "url": "//version/1.5/#kdrs-search--view",
    
    "relUrl": "/#kdrs-search--view"
  },"38": {
    "doc": "Home",
    "title": "Home",
    "content": " ",
    "url": "//version/1.5/",
    
    "relUrl": "/"
  },"39": {
    "doc": "Ruby View",
    "title": "Ruby View",
    "content": "KDRS Search &amp; View can be extended for advanced data manipulation and presentation. Some basic XML config is need to activate the view. We encourage the use of XML where possible, and then use Ruby views when needed. This allows for readability in the community. ",
    "url": "//version/1.5/ruby/",
    
    "relUrl": "/ruby/"
  },"40": {
    "doc": "Ruby View",
    "title": "Table of Contents",
    "content": ". | Ruby View | Make a new file for the view | Reference the view from xml | Minimum template | Data | Columns | Html | Ruby | CSS | . ",
    "url": "//version/1.5/ruby/#table-of-contents",
    
    "relUrl": "/ruby/#table-of-contents"
  },"41": {
    "doc": "Ruby View",
    "title": "Make a new file for the view",
    "content": "In the templates/your_system/ directory on your host, create a new file for your view. It must start with underscore. Use lowercase. The html.erb extention will make sure that the Ruby server will process the file first, then the html engine. /var/kdrs/sv/templates/school_system/_diploma.html.erb . ",
    "url": "//version/1.5/ruby/#make-a-new-file-for-the-view",
    
    "relUrl": "/ruby/#make-a-new-file-for-the-view"
  },"42": {
    "doc": "Ruby View",
    "title": "Reference the view from xml",
    "content": "The program flow will be redirected to this view. You will be in control of the presentation. &lt;table&gt; &lt;rubyview&gt;diploma&lt;/rubyview&gt; . ",
    "url": "//version/1.5/ruby/#reference-the-view-from-xml",
    
    "relUrl": "/ruby/#reference-the-view-from-xml"
  },"43": {
    "doc": "Ruby View",
    "title": "Minimum template",
    "content": "&lt;!-- DATA PREPARATION --&gt; &lt;% # Your data will be in the @docs variable # Adjust your data as needed before presentation %&gt; &lt;!-- DATA PRESENTATION --&gt; &lt;%= render 'table' %&gt; . Note Use ‘=’ to output Ruby on screen` . This view template will generate the same view as the default template. The difference is that you can manipulate the data as needed, and change the presentation with new styling, titles, extra text, tables etc. Maybe you want some different layout on print. This and more you can change from here. ",
    "url": "//version/1.5/ruby/#minimum-template",
    
    "relUrl": "/ruby/#minimum-template"
  },"44": {
    "doc": "Ruby View",
    "title": "Data",
    "content": "The data from xml will be available to the view in the @docs variable. If you need more data from other tables, you can fetch those here. See the examples for how this is done. ",
    "url": "//version/1.5/ruby/#data",
    
    "relUrl": "/ruby/#data"
  },"45": {
    "doc": "Ruby View",
    "title": "Columns",
    "content": "Select the fields you want to show as columns in the view . @show_fields = [\"first name\", \"last name\"] @show_fields &lt;&lt; \"land\" #alternative syntax . ",
    "url": "//version/1.5/ruby/#columns",
    
    "relUrl": "/ruby/#columns"
  },"46": {
    "doc": "Ruby View",
    "title": "Html",
    "content": "You can write plain html in this file . &lt;h1&gt;Hello, there!&lt;/h1&gt; . ",
    "url": "//version/1.5/ruby/#html",
    
    "relUrl": "/ruby/#html"
  },"47": {
    "doc": "Ruby View",
    "title": "Ruby",
    "content": "You can write plain Ruby in this file, as long as you use the brackets. &lt;% Ruby here %&gt; . Ruby can be used to edit the data, or write HTML code, like in this example: . &lt;% 5.times do %&gt; &lt;h1&gt;Hello, there!&lt;/h1&gt; &lt;% end %&gt; . ",
    "url": "//version/1.5/ruby/#ruby",
    
    "relUrl": "/ruby/#ruby"
  },"48": {
    "doc": "Ruby View",
    "title": "CSS",
    "content": "You can style your data with css, or adjust margins . &lt;style&gt; .my-style { background-color: lightgray; font-size: larger; /* vscode editor will help suggest what to write here */ /* you can also use chatgpt to write css */ } &lt;/style&gt; . Note: It is technically possible use Javascript for advanced presentation. However - we encourage the use of Ruby whenever possible for human readability and code sharing. ",
    "url": "//version/1.5/ruby/#css",
    
    "relUrl": "/ruby/#css"
  },"49": {
    "doc": "debug",
    "title": "Debug",
    "content": "Its possible to pause the code to analyze variables, and step through the code. ",
    "url": "//version/1.5/ruby/debug/#debug",
    
    "relUrl": "/ruby/debug/#debug"
  },"50": {
    "doc": "debug",
    "title": "In your Ruby View",
    "content": "require \"byebug\" . Where a break in the code is needed, enter this . byebug . ",
    "url": "//version/1.5/ruby/debug/#in-your-ruby-view",
    
    "relUrl": "/ruby/debug/#in-your-ruby-view"
  },"51": {
    "doc": "debug",
    "title": "Attach to the container",
    "content": "To see the debug window . $ docker attach sv-app . ",
    "url": "//version/1.5/ruby/debug/#attach-to-the-container",
    
    "relUrl": "/ruby/debug/#attach-to-the-container"
  },"52": {
    "doc": "debug",
    "title": "Quit the container",
    "content": "You need to press this key combination to exit the container, if not it will stop. press ctrl-p, ctrl-q . ",
    "url": "//version/1.5/ruby/debug/#quit-the-container",
    
    "relUrl": "/ruby/debug/#quit-the-container"
  },"53": {
    "doc": "debug",
    "title": "If the container stops",
    "content": "If you exit the container by pressing ctrl-c instead of the recommended way, it will stop. In that case: . $ docker start sv-app . ",
    "url": "//version/1.5/ruby/debug/#if-the-container-stops",
    
    "relUrl": "/ruby/debug/#if-the-container-stops"
  },"54": {
    "doc": "debug",
    "title": "debug",
    "content": " ",
    "url": "//version/1.5/ruby/debug/",
    
    "relUrl": "/ruby/debug/"
  },"55": {
    "doc": "examples",
    "title": "Examples",
    "content": "These are som frequently used code snippets for the ruby view. ",
    "url": "//version/1.5/ruby/examples/#examples",
    
    "relUrl": "/ruby/examples/#examples"
  },"56": {
    "doc": "examples",
    "title": "Table of Contents",
    "content": ". | Examples . | Display the main table | Add a new column for full name | Provide an alternative value | Use first part of the string | Convert utc to local time | Convert utc to formatted local time | Custom method | Show blank page if no data | . | . ",
    "url": "//version/1.5/ruby/examples/#table-of-contents",
    
    "relUrl": "/ruby/examples/#table-of-contents"
  },"57": {
    "doc": "examples",
    "title": "Display the main table",
    "content": "&lt;%= render 'table' %&gt; . | Will write the content of variable @docs that come from xml | . ",
    "url": "//version/1.5/ruby/examples/#display-the-main-table",
    
    "relUrl": "/ruby/examples/#display-the-main-table"
  },"58": {
    "doc": "examples",
    "title": "Add a new column for full name",
    "content": "Make a new column that combines first name and last name . @docs.each do |doc| doc[\"full name\"] = doc[\"first name\"] + \" \" + doc[\"last name\"] end @show_fields &lt;&lt; \"full name\" . ",
    "url": "//version/1.5/ruby/examples/#add-a-new-column-for-full-name",
    
    "relUrl": "/ruby/examples/#add-a-new-column-for-full-name"
  },"59": {
    "doc": "examples",
    "title": "Provide an alternative value",
    "content": "Show the student grade if it exists, or show a dashed line if its missing . @docs.each do |doc| doc[\"grade\"] ||= \"-----\" end . ",
    "url": "//version/1.5/ruby/examples/#provide-an-alternative-value",
    
    "relUrl": "/ruby/examples/#provide-an-alternative-value"
  },"60": {
    "doc": "examples",
    "title": "Use first part of the string",
    "content": "E.g. remove time from the string 12.02.2024 11:00 . @docs.each do |doc| doc[\"date\"] = doc[\"date\"][0..9] end . ",
    "url": "//version/1.5/ruby/examples/#use-first-part-of-the-string",
    
    "relUrl": "/ruby/examples/#use-first-part-of-the-string"
  },"61": {
    "doc": "examples",
    "title": "Convert utc to local time",
    "content": "@docs.each do |doc| doc[\"date\"] = Time.zone.parse doc[\"date\"] end . Note The date will be presented a little different. See next example for formatting. ",
    "url": "//version/1.5/ruby/examples/#convert-utc-to-local-time",
    
    "relUrl": "/ruby/examples/#convert-utc-to-local-time"
  },"62": {
    "doc": "examples",
    "title": "Convert utc to formatted local time",
    "content": "def to_localtime(date) Time.zone.parse(date).strftime(\"%d.%m.%Y %H:%M\") end @docs.each do |doc| doc[\"date\"] = to_localtime doc[\"date\"] end . NOTE the custom method is optional . ",
    "url": "//version/1.5/ruby/examples/#convert-utc-to-formatted-local-time",
    
    "relUrl": "/ruby/examples/#convert-utc-to-formatted-local-time"
  },"63": {
    "doc": "examples",
    "title": "Custom method",
    "content": "Write out numbers e.g. 3 as “3 tre”, D as “Deltatt” Returns original string if not found . def write_out_grade(str) map = { \"1\" =&gt; \"1 en\", \"2\" =&gt; \"2 to\", \"3\" =&gt; \"3 tre\", \"4\" =&gt; \"4 fire\", \"5\" =&gt; \"5 fem\", \"6\" =&gt; \"6 seks\", \"D\" =&gt; \"Deltatt\", \"G\" =&gt; \"God\", \"NG\" =&gt; \"Nokså god\", \"LG\" =&gt; \"Lite god\", \"FU\" =&gt; \"Fullført utdanning\", \"IM\" =&gt; \"Ikke møtt\" } map[str] ? map[str] : str end . ",
    "url": "//version/1.5/ruby/examples/#custom-method",
    
    "relUrl": "/ruby/examples/#custom-method"
  },"64": {
    "doc": "examples",
    "title": "Show blank page if no data",
    "content": "When no data, its good to exit early to avoid errors. return if @docs.empty? . ",
    "url": "//version/1.5/ruby/examples/#show-blank-page-if-no-data",
    
    "relUrl": "/ruby/examples/#show-blank-page-if-no-data"
  },"65": {
    "doc": "examples",
    "title": "examples",
    "content": " ",
    "url": "//version/1.5/ruby/examples/",
    
    "relUrl": "/ruby/examples/"
  },"66": {
    "doc": "logs",
    "title": "Logs",
    "content": "When making a Ruby View, it is sometimes good to have access to logs. $ docker logs -f sv-app . ",
    "url": "//version/1.5/ruby/logs/#logs",
    
    "relUrl": "/ruby/logs/#logs"
  },"67": {
    "doc": "logs",
    "title": "logs",
    "content": " ",
    "url": "//version/1.5/ruby/logs/",
    
    "relUrl": "/ruby/logs/"
  },"68": {
    "doc": "methods",
    "title": "Methods",
    "content": "These are the available methods for use in Ruby Views. ",
    "url": "//version/1.5/ruby/methods/#methods",
    
    "relUrl": "/ruby/methods/#methods"
  },"69": {
    "doc": "methods",
    "title": "Get data",
    "content": "Example: Get active customers . customers = table(\"customers\", active:true, fields:\"name, email\") . Method . table(table, criteria, fields:, filter:, rows:) . | table table name | criteria Add criteria as needed e.g.: school:”fro”, class:”3a”, year:”2001” . | if conflict with built in parameters, wrap them in one pair of curly braces {} as parameter 2 | . | fields comma separated string of fields to retrive, e.g. fields:”first_name, last_name” | filter optional filter with solr syntax. same as tag “filter” | rows default is 20 rows. Increase to improve sorting, or download more files at once. Set ‘MAX_ROWS’ if needed, but check performance when using large values. | Returns empty array [] if no hits | . ",
    "url": "//version/1.5/ruby/methods/#get-data",
    
    "relUrl": "/ruby/methods/#get-data"
  },"70": {
    "doc": "methods",
    "title": "Lookup data",
    "content": "Lookup data in another table. This is similar to using the tag “lookup” in xml . Example: Lookup address_id to find the city . lookup(main:customers, foreignkey:\"address_id\", table:\"address\", primarykey:\"id\", fields:\"city\") . table customers will be updated with the new data . Method . lookup(main:, foreignkey, primarykey:, fields:, table:) . | main existing variable that you want to extend with more data | foreignkey the foreign key in the main document | primarykey the primary key in the lookup table | table the lookup table that has more info | . ",
    "url": "//version/1.5/ruby/methods/#lookup-data",
    
    "relUrl": "/ruby/methods/#lookup-data"
  },"71": {
    "doc": "methods",
    "title": "methods",
    "content": " ",
    "url": "//version/1.5/ruby/methods/",
    
    "relUrl": "/ruby/methods/"
  },"72": {
    "doc": "variables",
    "title": "Variables",
    "content": "These are the available variables . ",
    "url": "//version/1.5/ruby/variables/#variables",
    
    "relUrl": "/ruby/variables/#variables"
  },"73": {
    "doc": "variables",
    "title": "@docs",
    "content": "Hash containing the data from XML . Display the main table . &lt;%= render 'table' %&gt; . Change all rows in a table . @docs.each do |doc| doc[\"first name\"] = doc[\"first name\"].titleize end . ",
    "url": "//version/1.5/ruby/variables/#docs",
    
    "relUrl": "/ruby/variables/#docs"
  },"74": {
    "doc": "variables",
    "title": "@show_fields",
    "content": "Array of fields to present from the @docs variable . Add field . @show_fields += [\"first name\", \"last name\"] . Quick add field . @show_fields &lt;&lt; \"address\" . Remove field . @show_fields -= [\"first name\", \"last name\"] . Redefine order . Normally we define order in the fields tag when getting data, but we can also change order here . @show_fields = [\"first name\", \"last name\"] . ",
    "url": "//version/1.5/ruby/variables/#show_fields",
    
    "relUrl": "/ruby/variables/#show_fields"
  },"75": {
    "doc": "variables",
    "title": "params",
    "content": "The primary key and search parameters from the parent will be put in the hash called params. Then the child view can use these values to fetch more data if needed, or do lookups. params[\"person_id\"] . ",
    "url": "//version/1.5/ruby/variables/#params",
    
    "relUrl": "/ruby/variables/#params"
  },"76": {
    "doc": "variables",
    "title": "variables",
    "content": " ",
    "url": "//version/1.5/ruby/variables/",
    
    "relUrl": "/ruby/variables/"
  },"77": {
    "doc": "XML View",
    "title": "XML View",
    "content": "KDRS Search &amp; View can be configured using XML. Features can be extended by using a Ruby View . XML displaying the example Sakila database. For an in-depth walkthrough of making this template and adding more features, see the guide. &lt;views&gt; &lt;version&gt;0.1.0&lt;/version&gt; &lt;description&gt;sakila movie database&lt;/description&gt; &lt;view&gt; &lt;name&gt;movies&lt;/name&gt; &lt;table&gt; &lt;name&gt;film&lt;/name&gt; &lt;title&gt;movies&lt;/title&gt; &lt;fields&gt;title,description,release_year&lt;/fields&gt; &lt;primarykey&gt;film_id&lt;/primarykey&gt; &lt;/table&gt; &lt;/view&gt; &lt;/views&gt; . ",
    "url": "//version/1.5/xml/",
    
    "relUrl": "/xml/"
  },"78": {
    "doc": "description",
    "title": "description",
    "content": "Descripe which system this template is used for . &lt;views&gt; &lt;version&gt;0.1.0&lt;/version&gt; &lt;description&gt;views for sakila film database&lt;/description&gt; ... ",
    "url": "//version/1.5/xml/description/",
    
    "relUrl": "/xml/description/"
  },"79": {
    "doc": "edit",
    "title": "Example",
    "content": "&lt;table&gt; ... &lt;edit&gt;date[0..9]&lt;/edit&gt; &lt;!-- extracts 2010-01-01 from 2010-01-01T18:00:00 --&gt; &lt;edit&gt;date[/\\d*-\\d*-\\d*/]&lt;/edit&gt; &lt;!-- extracts date based on pattern --&gt; &lt;edit&gt;semester.gsub(\"s1\",\"semester 1\")&lt;/edit&gt; &lt;!-- semester 1 instead of s1 --&gt; &lt;edit&gt;grade.gsub(/^.{0}$/,\"---\")&lt;/edit&gt; &lt;!-- If no grade, draw a line --&gt; &lt;edit&gt;timer.gsub(\".0\",\"\")&lt;/edit&gt; &lt;!-- e.g. 5 instead of 5.0 --&gt; &lt;edit&gt;location.capitalize&lt;/edit&gt; &lt;!-- Trondheim is a city in norway --&gt; &lt;edit&gt;location.titleize&lt;/edit&gt; &lt;!-- Trondheim Is A City In Norway --&gt; &lt;edit&gt;location.downcase&lt;/edit&gt; &lt;!-- trondheim is a city in norway --&gt; &lt;edit&gt;location.upcase&lt;/edit&gt; &lt;!-- TRONDHEIM IS A CITY IN NORWAY --&gt; . Each table and field can have multiple edits, as shown above. Searching on edited fields will currently search in the original data. ",
    "url": "//version/1.5/xml/edit/#example",
    
    "relUrl": "/xml/edit/#example"
  },"80": {
    "doc": "edit",
    "title": "edit",
    "content": "Field values can be edited by using this tag. Any Ruby function can be used, as long as its on the format field.method or field[0..3]. Multiple methods can be chained, e.g. field.method1.method2 etc. The edits will be done in the final table, after all the lookups (joins). Sorting will be done after the edits. ",
    "url": "//version/1.5/xml/edit/",
    
    "relUrl": "/xml/edit/"
  },"81": {
    "doc": "export",
    "title": "export",
    "content": "Places a button in the view for easy printing or downloading multiple files in one Zip-archive. To add a print button: . &lt;table&gt; &lt;export&gt;print&lt;/export&gt; . To add selection boxes and a button for downloading multiple files as a Zip-file: . &lt;table&gt; &lt;export&gt;download&lt;/export&gt; &lt;filename&gt;doctitle&lt;/filename&gt; . Note When using the download export option, it is highly recommended to use the &lt;filename&gt; tag to give the files in the Zip-archive meaningful names. To do both: . &lt;table&gt; &lt;export&gt;download,print&lt;/export&gt; . ",
    "url": "//version/1.5/xml/export/",
    
    "relUrl": "/xml/export/"
  },"82": {
    "doc": "fields",
    "title": "fields",
    "content": "Select which fields will be disiplayed from the table . &lt;table&gt; &lt;fields&gt;fname as first name, lname as last name, mobile&lt;/fields&gt; . fields can be renamed by using as . ",
    "url": "//version/1.5/xml/fields/",
    
    "relUrl": "/xml/fields/"
  },"83": {
    "doc": "filename",
    "title": "filename",
    "content": "Choose a field that gives files their filename on download. &lt;table&gt; &lt;name&gt;folder&lt;/name&gt; &lt;fields&gt;docid,fileobject,doctitle&lt;/fields&gt; &lt;filename&gt;doctitle&lt;/filename&gt; &lt;export&gt;download&lt;/export&gt; . In the example above, files downloaded will get the filename of the content within the ‘doctitle’ field from the same row. This tag is especially useful when using &lt;export&gt;download&lt;/export&gt;, because if no &lt;filename&gt; is specified, every file in the Zip-archive will default to the name of the field. ",
    "url": "//version/1.5/xml/filename/",
    
    "relUrl": "/xml/filename/"
  },"84": {
    "doc": "filter",
    "title": "filter",
    "content": "Data can be filtered. This will be sent as query to the database. solr syntax can be used, but use human display names for the fields. Currently filter tag is supported, but you can use AND or OR in uppercase to combine multiple criteria. Example: Show the subjects for a student that are related to his/her final year (type ‘s’). Also include exams (type ‘e’). &lt;table&gt; &lt;name&gt;activity&lt;/name&gt; &lt;filter&gt;type:\"s\" OR type:\"e\"&lt;/filter&gt; . Example: Include all buildings that have the name school . &lt;table&gt; &lt;name&gt;buildings&lt;/name&gt; &lt;filter&gt;name:\"school\"&lt;/filter&gt; . Note Best practice is to use “ “ for the filter values, so that special characters does not alter the query. ",
    "url": "//version/1.5/xml/filter/",
    
    "relUrl": "/xml/filter/"
  },"85": {
    "doc": "footer",
    "title": "footer",
    "content": "If all rows in a column share the same value, e.g. first name, its recommended to place the value in a header or a footer. &lt;table&gt; &lt;fields&gt;diploma_id&lt;/fields&gt; &lt;footer&gt;diploma_id&lt;/footer&gt; . If you rename a field, use the renamed value for the footer . &lt;table&gt; &lt;fields&gt;diploma_id as nr&lt;/fields&gt; &lt;header&gt;nr&lt;/header&gt; . If the data is of primary nature, you can use a header instead. Make sure the data is really unique, because the column will be hidden. The first letter will be capitalized. ",
    "url": "//version/1.5/xml/footer/",
    
    "relUrl": "/xml/footer/"
  },"86": {
    "doc": "foreignkey",
    "title": "foreignkey",
    "content": "If this is a child table, this key will match against the primary key of the parent table. This key is not needed for parent tables. &lt;table&gt; &lt;foreignkey&gt;fk_person&lt;/foreignkey&gt; . Multiple values are not supported for the foreign key. If the primary key has multiple keys, the match will be against the first key. Use Ruby for these advanced scenarios. All primary keys come into the Ruby View in the params hash. Then use method ‘table’ to fetch the data for the child table. ",
    "url": "//version/1.5/xml/foreignkey/",
    
    "relUrl": "/xml/foreignkey/"
  },"87": {
    "doc": "header",
    "title": "header",
    "content": "If all rows in a column share the same value, e.g. first name, its recommended to place the value in a header above the table. &lt;table&gt; &lt;fields&gt;firstname&lt;/fields&gt; &lt;header&gt;firstname&lt;/header&gt; . If you rename a field, use the renamed value for header . &lt;table&gt; &lt;fields&gt;fname as firstname&lt;/fields&gt; &lt;header&gt;firstname&lt;/header&gt; . If the data is of second nature, you can use a footer instead. Make sure the data is really unique, because the column will be hidden. The first letter will be capitalized. ",
    "url": "//version/1.5/xml/header/",
    
    "relUrl": "/xml/header/"
  },"88": {
    "doc": "lookup",
    "title": "lookup",
    "content": "Lookup an id in another table, and get one or more other values. Example: For each personid in table group, lookup this person in table people to find his/her firstname, lastname, phone and nationality_code. Do another lookup to expand the nationality_code into text. Repeat as many times as necessary to reach your goal. &lt;table&gt; &lt;name&gt;group&lt;/name&gt; &lt;fields&gt;personid&lt;/fields&gt; &lt;lookup&gt; &lt;foreignkey&gt;personid&lt;/foreignkey&gt; &lt;table&gt;people&lt;/table&gt; &lt;primarykey&gt;id&lt;/primarykey&gt; &lt;fields&gt;firstname,lastname,phone,nationality_code&lt;/fields&gt; &lt;/lookup&gt; &lt;lookup&gt; &lt;foreignkey&gt;nationality_code&lt;/foreignkey&gt; &lt;table&gt;nationalities&lt;/table&gt; &lt;primarykey&gt;id&lt;/primarykey&gt; &lt;fields&gt;nationality&lt;/fields&gt; &lt;/lookup&gt; &lt;/table&gt; . The resulting table will expand with new columns. If the lookup table have multiple lines for the same person, also the number of rows will increase. ",
    "url": "//version/1.5/xml/lookup/",
    
    "relUrl": "/xml/lookup/"
  },"89": {
    "doc": "name",
    "title": "View name",
    "content": "Name of the view . ",
    "url": "//version/1.5/xml/name/#view-name",
    
    "relUrl": "/xml/name/#view-name"
  },"90": {
    "doc": "name",
    "title": "Table name",
    "content": "This name must correspond to a name in the database. ",
    "url": "//version/1.5/xml/name/#table-name",
    
    "relUrl": "/xml/name/#table-name"
  },"91": {
    "doc": "name",
    "title": "name",
    "content": "Can be used to name a view or a table. &lt;view&gt; &lt;name&gt;grades&lt;/name&gt; &lt;table&gt; &lt;name&gt;students&lt;/name&gt; . ",
    "url": "//version/1.5/xml/name/",
    
    "relUrl": "/xml/name/"
  },"92": {
    "doc": "> Outline",
    "title": "> Outline",
    "content": "Index of every tag and its suggested order. Click a tag to learn more. For a more basic example see XML View . &lt;views&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;description&gt;example using all tags&lt;/description&gt; &lt;view&gt; &lt;name&gt;diploma&lt;/name&gt; &lt;schema&gt;db1&lt;/schema&gt; &lt;table&gt; &lt;name&gt;diploma&lt;/name&gt; &lt;title&gt;diploma&lt;/title&gt; &lt;fields&gt;fname as first_name,dob as birthdate,school,class,addressid,diploma_pdf&lt;/fields&gt; &lt;primarykey&gt;diplomaid&lt;/primarykey&gt; &lt;foreignkey&gt;personid&lt;/foreignkey&gt; &lt;parent&gt;person&lt;/parent&gt; &lt;filter&gt;first_name:\"arild\"&lt;/filter&gt; &lt;sort&gt;first_name&lt;/sort&gt; &lt;rubyview&gt;diploma&lt;/rubyview&gt; &lt;header&gt;school&lt;/header&gt; &lt;footer&gt;class&lt;/footer&gt; &lt;export&gt;print,download&lt;/export&gt; &lt;filename&gt;diploma_pdf&lt;/filename&gt; &lt;preview&gt;false&lt;/preview&gt; &lt;search&gt;false&lt;/search&gt; &lt;rows&gt;50&lt;/rows&gt; &lt;edit&gt;birthdate[0..9]&lt;/edit&gt; &lt;lookup&gt; &lt;table&gt;address&lt;/table&gt; &lt;fields&gt;street,city,country&lt;/fields&gt; &lt;primarykey&gt;id&lt;/primarykey&gt; &lt;foreignkey&gt;addressid&lt;/foreignkey&gt; &lt;/lookup&gt; &lt;/table&gt; &lt;/view&gt; &lt;/views&gt; . ",
    "url": "//version/1.5/xml/outline/",
    
    "relUrl": "/xml/outline/"
  },"93": {
    "doc": "parent",
    "title": "Showing parent tables side by side",
    "content": "Child tables that have the same parent will be listed side by side as tabs. Sometimes you may want to do this for multiple parent tables as well. You can use the parent tag with a dummy value like this: . &lt;table&gt; &lt;parent&gt;top&lt;/parent&gt; . ",
    "url": "//version/1.5/xml/parent/#showing-parent-tables-side-by-side",
    
    "relUrl": "/xml/parent/#showing-parent-tables-side-by-side"
  },"94": {
    "doc": "parent",
    "title": "parent",
    "content": "The table name of a parent table. This will make this table a child table, and they will be linked. Parents primary key will match the childs foreign key. &lt;table&gt; &lt;parent&gt;person&lt;/parent&gt; . ",
    "url": "//version/1.5/xml/parent/",
    
    "relUrl": "/xml/parent/"
  },"95": {
    "doc": "preview",
    "title": "preview",
    "content": "Shows a preview of the data. This is typically used if the number of choices are few, and the user does not need to search for the data. For sensitive data its recommended to disable the preview and require a spesific search. Example: . &lt;table&gt; &lt;preview&gt;false&lt;/preview&gt; . ",
    "url": "//version/1.5/xml/preview/",
    
    "relUrl": "/xml/preview/"
  },"96": {
    "doc": "primarykey",
    "title": "primarykey",
    "content": "The primary key for this table . &lt;table&gt; &lt;primarykey&gt;person_id&lt;/primarykey&gt; . Sometimes there are multiple candidates. Choose the one that the child tables will refer to. You can also send multiple keys, if the next table needs more parameters. &lt;table&gt; &lt;primarykey&gt;person_id,type&lt;/primarykey&gt; . When selecting a table row, this value or values will be sent as a parameter to the next view. They will be matched against the foreign key in the child table. Se foreignkey for more info. ",
    "url": "//version/1.5/xml/primarykey/",
    
    "relUrl": "/xml/primarykey/"
  },"97": {
    "doc": "rows",
    "title": "Sorting",
    "content": "Beware that sorting will sort this number of rows. One page at a time. If you need to sort across all pages, then increase this number to avoid paging entirely. ",
    "url": "//version/1.5/xml/rows/#sorting",
    
    "relUrl": "/xml/rows/#sorting"
  },"98": {
    "doc": "rows",
    "title": "Performance",
    "content": "Check to see if the increased loading time for the view is acceptable. Tip Increase the number of rows to get them all in a pdf, or sent to printer. ",
    "url": "//version/1.5/xml/rows/#performance",
    
    "relUrl": "/xml/rows/#performance"
  },"99": {
    "doc": "rows",
    "title": "rows",
    "content": "Default number of rows is 20. Use this tag to change the default for this view. E.g. for a diploma we always want all rows on the same page, so we set a high number. &lt;table&gt; &lt;rows&gt;1000&lt;/rows&gt; . ",
    "url": "//version/1.5/xml/rows/",
    
    "relUrl": "/xml/rows/"
  },"100": {
    "doc": "rubyview",
    "title": "rubyview",
    "content": "You can make a Ruby View if you want advanced layout or features. This is a HTML file with some embedded Ruby. Make a file e.g. templates/school_app/_diploma.html.erb You can edit both the data and the presentation. See Ruby View for more info. &lt;table&gt; &lt;rubyview&gt;diploma&lt;/rubyview&gt; . Data from the xml file will be available in @docs . ",
    "url": "//version/1.5/xml/rubyview/",
    
    "relUrl": "/xml/rubyview/"
  },"101": {
    "doc": "schema",
    "title": "Supporting different siard files",
    "content": "If we have two siard files from the same system, we can experience that one has a schema, and the other not. Then enter a schema name in the xml, and the system will fall back to the first schema if not found. In this way we can keep using the same view configuration. ",
    "url": "//version/1.5/xml/schema/#supporting-different-siard-files",
    
    "relUrl": "/xml/schema/#supporting-different-siard-files"
  },"102": {
    "doc": "schema",
    "title": "schema",
    "content": "Some large databases are divided into parts called a schema. A table is uniquely referenced by using naming schema.table. To simplify table names, it is recommended to assign a default value for schema. This tag is not needed for simple databases with only one schema. &lt;view&gt; &lt;name&gt;karakterer&lt;/name&gt; &lt;schema&gt;ist&lt;/schema&gt; . ",
    "url": "//version/1.5/xml/schema/",
    
    "relUrl": "/xml/schema/"
  },"103": {
    "doc": "search",
    "title": "search",
    "content": "A table will be searchable by default. If you want to turn this off, you can set this value to false. &lt;table&gt; &lt;search&gt;false&lt;/search&gt; . Tip Use this for reports, to get a more compact and printer friendly output. ",
    "url": "//version/1.5/xml/search/",
    
    "relUrl": "/xml/search/"
  },"104": {
    "doc": "sort",
    "title": "sort",
    "content": "Sort the current page based on the given column. Use the tag to get more data for the current page. If the values seem to be integers, the sort will be numeric. If not they will sort as string. You can sort on one or more columns, either in ascending or descending order. Example: . &lt;table&gt; &lt;sort&gt;lastname&lt;/sort&gt; &lt;!-- sorts in ascending order --&gt; &lt;sort&gt;lastname desc&lt;/sort&gt; &lt;!-- sorts in descending order --&gt; &lt;sort&gt;date desc, lastname&lt;/sort&gt; &lt;!-- sorts by date first in descending order, and then by last name when dates are equal --&gt; . ",
    "url": "//version/1.5/xml/sort/",
    
    "relUrl": "/xml/sort/"
  },"105": {
    "doc": "table",
    "title": "table",
    "content": "Marks the beginning of a new table configuration. Other fields must preceed this field as shown. If multiple tables, placed them on the same level, beneath each other. &lt;views&gt; &lt;version&gt;0.1.0&lt;/version&gt; &lt;description&gt;views for extens&lt;/description&gt; &lt;view&gt; &lt;name&gt;grades&lt;/name&gt; &lt;table&gt; &lt;name&gt;students&lt;/name&gt; &lt;title&gt;students&lt;/title&gt; &lt;fields&gt;students&lt;/fields&gt; &lt;primarykey&gt;students&lt;/primarykey&gt; &lt;/table&gt; &lt;/view&gt; &lt;/views&gt; . Note The tags used above are the only required tags. ",
    "url": "//version/1.5/xml/table/",
    
    "relUrl": "/xml/table/"
  },"106": {
    "doc": "title",
    "title": "title",
    "content": "Creates a title for the table . &lt;table&gt; &lt;name&gt;student&lt;/name&gt; &lt;title&gt;find student&lt;/title&gt; . The first letter will be capitalized. ",
    "url": "//version/1.5/xml/title/",
    
    "relUrl": "/xml/title/"
  },"107": {
    "doc": "version",
    "title": "version",
    "content": "Version is the version of this configuration file. Convention is major.minor.patch Development starts with 0.1.0, then 0.2.0 if new feature, or 0.1.1 if bugfix. Increase major version to 1.0.0 when ready for production. &lt;views&gt; &lt;version&gt;0.1.0&lt;/version&gt; &lt;description&gt;for school system abc&lt;/description&gt; ... ",
    "url": "//version/1.5/xml/version/",
    
    "relUrl": "/xml/version/"
  },"108": {
    "doc": "view",
    "title": "view",
    "content": "Marks the beginning av a new view. A view has a name and one or more tables. Example: . &lt;views&gt; &lt;view&gt; &lt;name&gt;grades&lt;/name&gt; &lt;table&gt; ... ",
    "url": "//version/1.5/xml/view/",
    
    "relUrl": "/xml/view/"
  },"109": {
    "doc": "views",
    "title": "views",
    "content": "Group all the views. All configuration files start with &lt;views&gt; and ends with &lt;/views&gt; . Example: . &lt;views&gt; &lt;view&gt; &lt;name&gt;grades&lt;/name&gt; &lt;table&gt; ... &lt;/table&gt; &lt;/view&gt; &lt;/views&gt; . ",
    "url": "//version/1.5/xml/views/",
    
    "relUrl": "/xml/views/"
  }
}
